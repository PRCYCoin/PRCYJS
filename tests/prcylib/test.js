const Tx = require("../../src/prcylib/transaction");
var utils = require("../../src/prcylib/utils");
var secp256k1 = require('secp256k1');
//var raw = "0100000002748399b0b4771a12b925cbe1cc2fa8e2b387af6879116bf3e0a61dfd59b1b8220300000000ffffffff0021037a43faf94ed38086bc6ab0f2228a1b5881be114773de316476a3160c5f4f23bc0b60154eb946b7a46e6d2fe023246d3949b3d43f9b35dac3ffcbf06e922ebd22de03000000c3099aa6079698752d76097f415965e09d8afa6ac6b8e810522fcf177d0ce4a702000000b755e212142e8434096feb1c3907126050346c60e21c1225ad9d9191a797042b020000004674f9f1cc44b53c697bd3e7d63463d9c827b98688bb8d08de0b5bd20453c412030000006ef638ef9d7e10ea173ce0f12516761716cb1cca6d7dbda505f350a8fdeef94f01000000af0c7d1c80c954a0587b67ee1727264de652c5a88c6eb5a99dd5df7c3f718082010000003f6d885965b2b3cba03eea1ee2c48f3c9c16a4b80035832b0b524c5483642fe3020000000e5003997f9e906be6ba0eb366a57885e98d524d1d5f73116001e254dc814b7203000000f5d6b1a2cfce8ea9185ac70f3ea7e8d4d24e4f818e6df8cdb2bb3afab086e8a3030000009c157847719b50d46e01054939f8b3d384622844dd87c331e015dfb602be1ab5030000000aff74670351432345325f13442ddf8bfffabc1681f9966cdadecb4bf2581cee02000000000000c47842f35522c9bec2aaf1667e9a18cdb3ce70755bcd450ae1b394c8616d68d60300000000ffffffff002103b4e4e9a08f13e243e38d99b4176c97f33cad2ef0b839d77cfd8a8839bb78eb8a0b40d898e957d555b17c534f250ab52c2f97857fc99013e580679ef4437b72c0f8030000008f96f6673fd8319b88b5e61c1c06a0a0040566db1773b611e7f974ee398830f302000000efd8c37192507a717698f165bf8abe1458460b27d2fef230e59cdff59a2266310200000003ca43298f9173e660c0697e58e4361a28321ed600aa4bed4792766c9615a65a010000006ef638ef9d7e10ea173ce0f12516761716cb1cca6d7dbda505f350a8fdeef94f020000005934183736f498fe4e06c5cc10b092352cfedcf166a031c7455ff2fea354f7aa030000002123f137ace08eca5535fa9cb0918c8c13fd3571570f6d4bfd324449ecfb523001000000b7e65f7ea456ec722e21b20b29e4c0a01c3d0d31e43db8c83460bc027f99409503000000a7bbb9b30f3c437815b482fb60c6dc046770968abb2e129da6577d31a3eb3de8010000005e8f4bf0580775d744d1aa8e323dc167d285761362c0bd2c61f7619b0d995ff6030000007b9eb57fb1157b3f23cde9bbae389dca5b74eabf8de0f6973ac5bb89fca3ae83020000000000000100000000000000002321024d2f82da1237d141116cca88b71bc081050ce07ae900c3410924e5f50a93db1aac002103823174803dde84efb5cadbc0c2a21cdf8f50c4c73c4751f554630eef27204b874f2ed23491a99adebf2f9bfaccd2e1a797bc78c13d5b05af4f24e0a36e66e6a24a12816772c112c1892b05e4b862f4616ad52581da7879b512ad12467f0488a59f66307b5a526e141b73a10c2a518bcb40dc0a206ce4802217738498276828e7002109c629a99dbc37425b801aed0a3193d7dbff395304f8e47ce54d3c8d533e9d9779000000000000000000fda30288f12757af8ea66f6c74e354921ce7424abb952744503a60f48496bfb62724fc14813cc87f653dec1ff134c7b03df8f4ddd772b6f427798393bf1e9865362f6e0ea3f1ca55ffe046e474074fcd333f2bf01c9b21488bccc7f8ed68be502ae0ec0266641b4811ab9c4d9916e02fdb461457971c6bbea4006f07f1e948865e95c4aad0600641af52ce151a08518b4d5b9ef4deece368e5296c2524422243a9a0e7163ce76d9d611c94b0f98320f6108852e7efc32cd5fa1f1fde4f5f418e8413fa2df0aeb9acbff67bb4e4171473d6c8d847ef02893259bd475266fefb5da043a93abab1dfcf1a8ea3b712a666a5d645962c9fb52ca940a0be14c029f3f980d9580f9fd2f4e0baf433000ab8812875f90a38b0e4a9184a763091cc171be94eada665547190a07742914070e81a49133d3a0e9eb50b878a7e39d44556ee76cbcb9d24fcaeeaa358a51b3d4ca1bfe25bb5716bc9d2b52dcf90493f159989db6f974fe86502f2747c779240c17c06515ae5b1663f4a7f26c7291ee92566f6a9128caa10701071250362600d999bd8c0cb1bf0c133d6618f592c0aef56dfd30e9d143b9c57ba2338e9a54f1814160ab4db997ca402fcc11b4eba7b4f703ce94b1892ba9d27a42fcb4b8a4f27d954c1020b62ad22c84bc94c8cad4d328ea8d8111487d57f2806e622135c3f81ad25c8718663303b4e81092111e739b2dc00b786b67de23c19b441a1eea4be5f680a7aa416c5acf6b379f02f0d1b663a547e3a3e12bdf10ecbf196cab43f10ca7f1bc5409d68ef95173e31905390497e6bd9960f65e1aa8da4345551c9edd0e944a2763db181fff1e73bf0832e595a13c100dddd9b7b76e8e7d322cf15783204b497c227e593abd29e5adf04e60524c3c16cd39f32d66239ad935b168e112cffc1112e8eba37d11a36a3d012421d141f3eea16ef594d8f8ed6ac8068c907000000005e9ce29123f4ece614f867abd09e1d8b6be23281432d2a60e3949eb045036ece0c0302feafb948506bd39c8a688d6d85c453ef75a02bb41e3dcacfc9b6cebcca9b3d23aca000392734b33fb7e9d6b9c59d0f878bb1d69e463ba042e87c2deece19ed45ccb092a6f4c7b762b39af258330eaf6ac327e4f8e8be6973b3a19a76760ad103d87361b538a154b29c1d7c1482af248ee04c47b1dbff597b84dd78fc56dfafa9c9d2a4b872f5fd2367ac003515a67f5a19a05cfd3790bcdf83678f5e5693d6f915564f39b4d5540dcf689f9533a2ae32a52a07acb963e11a459ecc898a1d51ba030eb47f298b442fbc281b86b83777c6ca3cf348d99b08adfb2db7b28b6ac209c99ebcb5154820b501e99c4874b8872b82d35bfa34ea7c90fe87f6dd9320a5011bfbc98f6df0d2aa81b533c7cec22dc704b3f85ad1cbcaf884bcaca5fa3a2c858703ad8582a72974f892fb02485d3d501a54ab331cfe255199486d8140300ce680dbf993e2650262e9f7947e8d793514a797d662827e2568ea83ed1d0e2ad88728e61768649b981be8c1f5949cfef80d87353377f18fddc319c19ef93d51e9ee9f9d035e9b86ef0c337d0c11208efe3525921ab492874efb19891045b44777db0be792a343b83826b180b033ed918c549c3d829c08a48e88009237f5634820dea6a9f6e73b9c3ff45ea43c28e75920d52453eb2fe416be4d4840aa4249e2c78365e09d035b64e0669757460d2f003e69b26b63e99c46d2006283ba1a2a256fed2b310394fc8d36d213627ad8d0317ae10e644030f8f0297ae29415ae76a22c9eb45dc218e9f91c58d01a5a73779df7156757fed8317d8fe2ccb1a17a955846d1ced96e7b039325dc1e57ea3a5621b2bb4f8ae06396e2ea0f73b1937e1cfd76c6b32175f3bfb73baa5b095aec9e7f86142d254203e7a045020bee0e9fb4207016361ed5f450d8bd40fd2f0fe6b55d35f3beb6512726f256a074cc7e9c5aaf1e2fac6cfc880d0301d84dd07c3e1efcdcf0d1f05ae5bca2c13c456a93ae4a622d22d2705447770a7e2d3358616970f302923783d2d1353a2664efa43a2f207e9da111bd25731e6bf3fb761d8d38852d68549eaf7ac2377f80cb70cb3c8410f04a0d043c7dc739690385718815f0a76d93eddf759587366543234c054d4e82cccb69dbf2538af7321a2d23f6c673d4d82401e346f70684bbc55490bb2d2ed165097cbe720fb0d7fa30773c6cfdcb088d2fafa5c46ede7e56396053c195189faac8a0badb8ddf2724f6034adf1c810790f60662436d69654552a1ffebd69013993a080ea8c918102e34a4f9f79b93b6117ddf4d63aa0a8580b5256003dd7a8fc05909225ced9df09cf2603564e2a3f4488923b633716878ea1095da3b5ca65c8dccbed951da79f81e81f203ff4396493c838356a7748d44d70576816dd4804be5b4dac775fa80e93c7f910ff97a958fd4e0bc11760236a0243361cbd5a96ee24873b77a8246edf8b9eb0b46a0dc7d26705b3d28ac853d1817662b2a539eecf8b1df8a83be83163657f1af57038d2cacfac56653114c075ac33d2d06c4254f82b9a080dcf0f6c082e51a0ced2426ba6dcab4057035bb9d323a86eaaf85af9a8d59175aa9a5fe7c2655bd75fb335743d4557b9bc97068221e8c993af232afd95e2ae767ccaa6c39affbbbd744c221024f44c26ba1407b753855f26b217c0c5286f0670feb5ac52ea0476f2ccba14c4e";
var raw = "0100000002ec00a89421cde4375d92cf93208cafc8ca4a882c1d39def50ca616dd23242c550100000000ffffffff002102e1b50ca3d9ce868ec2d50da046c71618947bd28d25f9be3d36812d63341b44620f28494b54052ab8a13227c176c6a5f5c50b8d86de69b529a5207abfd7b13aa71203000000a21455b0d68df56dfe95fbeb9b40e4cf7052b879a21578449e597771518094fe02000000054afb4132b565197a00e1d3636bd63b5ac3cb7ba19964a0aa0986d2cf96d80801000000f8affda9578f2233234fbcd0a660c9cf7767a9e23836b58f33d1a4498ff6b0b001000000c1bdaa09178fb3f2152f2c97a35474d5d4cfb750b0019ebf71481c402ac3712e00000000f859b379dedbdd82583f5b68d01c530c283098d283b3e73ab5706d3cbc3c221e030000006964512f00fb8bc9c640f8d6390ca22057c2bf2b4e6fc92e4916652d591df85d02000000c1dcb76c5ec38e068b5221d62f658c354dd2a8316c444a169185f32dad5ea57801000000e37fc00de4a4981c8e87d453ad6d4854e20601249aea3bf6e557b4f1daead90c00000000c1dcb76c5ec38e068b5221d62f658c354dd2a8316c444a169185f32dad5ea578020000006be36fa1e3621d89202b824b0fc26d8065aa9db10efdde6adb88616b5e92de9b01000000bb64e2badbc1c46a13a78af5f9db0d59cd90974c4ebcf7157563597da0e99d9a00000000db70504899f0ccd648376730875e3fd5ff60908b1bc35e7e5b71629fcdcb7299020000003a837bcc9d2f6e2d5a5908b202afe89481cc49eb40b6a65395b8d52dfb685c0902000000ef8fbe47037823975870a6275e4783e85cb1062cb0206c92a565027e2152d25c00000000000000054afb4132b565197a00e1d3636bd63b5ac3cb7ba19964a0aa0986d2cf96d8080200000000ffffffff002103b7b629fe5235e25a372ef2310658c8575fbc272f549929c7fd190eb9b6fa7a4a0fcfadb29be1602591cc219255dd6f137d2dcabd073bd1d47e7a9ee877a77153fb0000000069a9c7515539f7fab03e8c91221254792fa383a55d96870ce514d1af3ff985eb01000000a21455b0d68df56dfe95fbeb9b40e4cf7052b879a21578449e597771518094fe030000000d2011748bdb52deface710b28c25fab916bbc1d80211357758b28d672c1c5b901000000c1bdaa09178fb3f2152f2c97a35474d5d4cfb750b0019ebf71481c402ac3712e0100000042c0f010359cf52bc69dde692b5db81d2b7859f5d0e0d0b1eb1f5ae33a838c4d00000000054afb4132b565197a00e1d3636bd63b5ac3cb7ba19964a0aa0986d2cf96d808030000001d2d8c37e0d43b20d7243663ab4f4c53e8c98980f301b6d3e2639f7115f946f301000000883d7a67b154edd6bb07ca8293a06870d9ba6e723fc284cfcfed4a6d3cd0284502000000d18a0a13143eff4b9261b93937aed2857354af2b6aa0c43fae9c6cacd34aa54a01000000ef8fbe47037823975870a6275e4783e85cb1062cb0206c92a565027e2152d25c01000000fa73c1d7bfcd3b908083d53f770806720c1d26a62fe520e3d7a5905da98b44a70100000027fa20f8fd6d8c5bab3cc2365451ece2b7e6bbc35d8212e4285737599c7effc70100000097e83caebc5d4ef6816402549876c44c4a12441470050ee67d40e2b04842075b030000006964512f00fb8bc9c640f8d6390ca22057c2bf2b4e6fc92e4916652d591df85d01000000000000020000000000000000232103808c3806da566d1e42dea0bb6680221da6589a551c45bd73ae5b5a24484e00afac002102f4e27b5b1aaee89e06b4024620c22e68f41e29ffbd930e6f40a53029a56c5c751eed14615b1f4c5499da64c0828bb3a1808b97fdcff11655aaab4e33e31d1ea5df04e0f96726bd2e411849c7304eda9c2ecef1c2839215d22f85614d0022e7dc445569a8ed8a6b3c9e4788fad633c528d58abe6dff22ff68900e2e1e247a5786002109450db7d210afe65e71b5a9d19603e65fb3478faa10fefc4ac1dee270c0a0f6590000000000000000232103ae860ea875f4e0667e79fb798397ad88949bd578bd3dc43ea7aed872a6149eaaac0021037d3e0b2354891defc274ef60e588f20ea4e6d9af4888c68096b616945ab52a246ea8242d4bc746a7e031c59ef5421d94131584900415709d6fe65d741279a26fc38f5dc8a8bc15c884c4c8dce265a67476bab422c52c9eb30868927ee46b8cbd770f1dca6effd2d01a74bcf3bc044e4f883520338c08e846778d93515f71c8fa002108e2bc30541a4834c18b4fe5c584a7385d560b09a6c97a140a1088d33266989c78000000000000000000fde302706602f83e7c0c110e60a1dcb61aa04e478717cc03b1dea759fa72d18e017e37ac782c415e94c3fcfbf0263f29fa64c83228e5725100b1d8d7f16913e9a686a8044270da50dcc5b0a5d157a6b7574d2ffc96a58587fa96ff78d76cc08b7eb0b88f5670ab28d74fdcde008c7ba7db65e5eaff50db8b92eb565d0e502e488b8da58aa2e58ad9c82edeff125e1d99c509afb3de3357a25fa5eae898f84c5fe48d0462dc2da8461f72759301bcfbea83329600c1b84793ca2ee9ca4dcf74f5de62b9fabc49d043401619d29e477e576fbb03b33e8ca648428eb00a13d0a0b4b8a75b217f243a9b3d839a618f3d2fb2e1fffc476e1464bac3d1d001957930b25b4f0f62334f6176e44a9df1ed48d2d2025a5b4362267714f68f740f7593688e5839c3b5ce27c461d6f5bfe0eeb9defc6b35f07cbe48128c547b7f6e5b754bb493c8de0d8815376baeaccb00ef20cc81cf1e1ca9ce8e6e17681c8e43fe465680b380bf98c207d03953cdd654a2447f2badef22a98ffec63df154df408b5e6488dcd4ad9149489681e39fccb8c03c8fdf43f03e299a5787c32620c4ab4b0c7f5a66731d1c12bd05a3218ba248856b9aadf2c83239debb8b28ec1f31c72fbe615d41f85f2aefd13a5907bbd9f2782b7f63bff0f1f7d1e4558b40981137358adf0058d332ecdd60fa25d064c4ceab4f055e7a8a147f4abc283ff08edb3c8872b30a83247db678da6549869858d45119943bf44fc338f246e31f788bf29baed19a3266597a03996324c0fa57ba139e82a3a202cd599dd3b401ae699f2a921e4ec5d1709b837341cab9b6a8626006335afd4665868c9d6e83b60c23973bb3eddfe164e2f284a9e4b5647ca4ff6b5a9a202fc11322005a3b2efd62c8b917c5a0b72a489e0105c6bcf4c12ae43063f07d9a6e266039dde20f69f6a747fc94c97807e96968d34fd80ddb1eed1d786bc9c580e2f698c065cd192af7365d84e5294b36fe9a18af1bbdcfafd063d2dc68efb1c246cedbdae4835bd10e9ab978f835b06103242161085916b840d758080000000095d9981a58771d95a62f6c867a28d08637992c80a1f714060208ceb7efbc7ab51003f126df7046f8684c6a28faebeee384d179a2ae3b2d1fdd3e645c9d64a48327eb5a68b80af5fc7caf008e8684aa827f995f775711b59edf3060c3ad3044ff1e1c9f28e2ba25bed42c765fa48addd6660732cb3a9f597885b89399aa1562d7a56a0370c346a7e1eb23bde524a88121e53c0c03ef859f42454231485b9676f0a75bdfe55c1d6b0921f1315dad1497a3f8fe785f33e63bd3c8075f009148f74e228a31458bfae3f3c783bf7ec9295bca65f4ab1f36367e7626372e9eef390ff76b35a703496fb90f9cc3ffcd43ebe21b2466c2f5d73c2a985c96545e353fa396339e299329d571973f091af9f9dd272abe5ed7a015af37e5e8544af1be9097cd77bd3f7c5011906baa20ce106525f99739c7510fe93284ff10e9fc511ef7878b5fc5bf1f03f4612801deeb576812e67e4f469ea8faa70ce4a9216b2fb8eec7138cc0d38998e1cf49c70a15f57afa832a541ee142f5fa615ac19a0c2ee0ec4a1917c2cee85b5b73f6e0d87e702c7618b7764fb6b351fac2ba320fd0b612ccc51aa425316771038dec84a24097e664f52de0783c00c3a32a66747e5d6bacb2a8c9f191fae5ffd96ca48cd1afaf5afa1fbf3af6fe22055aba7910bf195c91528104897ae3c9015925fbb38914a3d2f03f8d78fcf9dc4e2fb08e9e049648b8107c9a81eae7f34ea603db552365459ccb45da8f863aeff5c75ea01598c03bbd969b909a31a41339f63a5db6c6face50e9ca0c101f19fadf69984f9f5c61cf2f3a037471e9e6016a145f07bdf0b97535c2ed87ff0c12e46c2278b277131c1876709f5129fce40f2f5837032fdfe7249645268c90ac23f1fa228b2e9ad27c949c9437dd46ba217e14093de8b860ddc5f21d83707edf8541a38d44932e8a3233998c79b912aefb95d5ce4167bc65e4ff6084a57d17e4eab66f3e6dbf4b2b32111a89948536b78732f589b9c903a1fc4a40d787ee990d569a0caf0685e607025ab1ac1061609874dad638656469e9d543b0c56661c9df7ac6665d95a6e1aed0c7f74d31b88394955cc894737074ea69353264d4ef186e387df17bf62688eba9a4b56ad6fc3adc514b8685e7e59003f02563ee910fe82a0f27f87ff8072dc7f7a2a9473211e9248532328f4537c4d2cb31fa9d78e1c3b7bcf903d84787fcbf29523cc612c9997731ae8b7941593472aaaff717966399234d4e61699c83855295ce6cb0b488dcb4bbb47a48e411b132038ca1ce29f2a9568b233dc302af3919fd883145d4bb2fb4dfa950fa8561d26ad4b736e342607e79f6e5e077c036f3741574efb1b6b99f625c1a9a9339819fefa09ed201889653e6abfabccf46be08788588d7bb1674e8565aed7ddf6f1586a3230359fcefe7b8518a1cf450c5398deb0f0583a087442a8f7a4ed651bd6474f9897c16d87217c0ff5b8cab807b03ec390048644ce3aac9a86aeffdb919a301099aac871f51f2d5d6f17d7f685e0d38743b5003e0c2c791864cbf66384341ab216c8b03a25b4cdebd5541275e535151ff888586efa862df687befc34e8de4a9e673d349a11a522c9a178916237e663b3b174503e6f4154c4e96b8a879b577a3993d65f3a9aaa25d74d8e5f35f55d70388d45278b149a6b9469fcd6304afc70a2cffe4af032d8e536fb08bc393819339ab35662d0ef13d75dd35c3c5b12236acc8690583d0eacea6c48f1bd46ffdfe4888528eeab1a10dea931502fda7d2d095ab80a564760059ca58aa6bec1e09ae4b81373330c6104be9879ef9ac106ccb5be8ff98be6d03cd9c18d3d69772ca181f4b07e2334227d8e3c996dcc7d1eea7ddbb217fc9cfcdc00c3d2d94ad26850be8423321462b8f41b09b015d3bf96e40b2e3fd51267c040495529610a95f59771b25908cbfff522e23dd8e8ecefba0dc9be4760f18271103f45f7754c4285a0963bdafa72d2d5d34f1b9bbc0b0f66bd93f4989e094a05feb2b4af56005b3605f79969ba870d5abca01a4a5ee30f5c7ec3528232f1c320124b6494ca8c7865720b251e190e90869a846b9850617ac03cf5636bc5aa58c3bca03dda8b39b7e7585f17ab699da946b97f2d69b9c3f0e3d5750b26e26d4ef79a001470f2fee35732cc971c0774096a9f025c87d1ddb734ae6d8f42bc148ca157089d5b6b9052fda30cec669d0164686af4194120830d694ff492116f159a8d237f121039e5b9bb38eedd24ddf800c69aa1de17832ed6c9a470566eeda8336b57ce5d493";
var parsedTx = Tx.Transaction.deserialize(raw);
var cloned = parsedTx.clone();
/*console.log('vin.length = ', Buffer.from(parsedTx.vin[0].prevout.hash.reverse()).toString('hex'))
console.log('vin.length = ', parsedTx.vin[0].prevout.n)

console.log('bulletproofs = ', parsedTx.bulletproofs.length)


console.log('tx raw:', Buffer.from(parsedTx.serialize()).toString('hex'))//Buffer.from(tx.serialize()).toString('hex'))
*/
var serialized = parsedTx.serialize();
var hash = cloned.computeTxHashForRingCT();
/*console.log(
  "Serialized tx:", Buffer.from(parsedTx.vout[0].script.buffer).toString('hex')
);
if (Buffer.from(serialized).toString('hex') == raw) {
  console.log('test passed');
}

function toUint8Array(hex) {
  return new Uint8Array(Buffer.from(hex, 'hex'));
}

function negatePoint(p) {
  var cop = [...p];
  cop[0] = (cop[0] % 2 == 0)? 3: 2;
  return Uint8Array.from(cop);
}

var commitmentIn = toUint8Array('032770a7e25353eca612e1a413d20424e98888bf82a71ad9993fc8f81c85f9a528')
var pubkeyIn = toUint8Array('032688fb1dd8bc6c6bf62908f86b7efa82f306dd6b06e150dbffafb62a18bee108');
var sumOut = toUint8Array('03f5619e3c20307b150b7f6f3ad7bc9510c83d81313a37c3d474232b0cfe32c629');

var ret = secp256k1.publicKeyCombine([commitmentIn, negatePoint(sumOut)]);

console.log('ret:', Buffer.from(ret).toString('hex'));

var externalRet = toUint8Array('031b1fd942db1efc9741412f803299ebd2ddf2d38fa48ddbe0f7e790f834915167');
var diff = secp256k1.publicKeyCombine([ret, negatePoint(externalRet)]);

console.log('diff:', Buffer.from(diff).toString('hex'));


var commWithFee = utils.createCommitment('193320000', Buffer.alloc(32));
console.log('commWithFee:', Buffer.from(commWithFee).toString('hex'));


var outCommitment0 = toUint8Array('0321ec4fd80b71697d892db282d4bcb3bbb79a5ef0d3c8cd05725079aff20baa2c');
var outCommitment1 = toUint8Array('030ae71d4dba1c4bbde867d3a74dad83030cbb2041155b4d716d4b492839b6dc3f');

var sumOfOut = secp256k1.publicKeyCombine([outCommitment0, outCommitment1]);
console.log('sumOfOut:', Buffer.from(sumOfOut).toString('hex'));


var pubkeyRet = utils.toCommitmentFormat(Buffer.from('026b0399b32d888b327d0eefd18bf745597e84d9fe7ceb63ad7d785141a6c2cb98', 'hex'))
console.log('yRet:', Buffer.from(pubkeyRet).toString('hex'))*/
